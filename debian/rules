#!/usr/bin/make -f
# Debian debhelper package build rules for libwebsockets

# Aim for the top, adapt if anything should break on the buildds.
DEB_BUILD_MAINT_OPTIONS=	hardening=+all
export DEB_BUILD_MAINT_OPTIONS

CFLAGS=		$(shell dpkg-buildflags --get CFLAGS)
CPPFLAGS=	$(shell dpkg-buildflags --get CPPFLAGS)
LDFLAGS=	$(shell dpkg-buildflags --get LDFLAGS)

ifneq (,$(filter werror,$(DEB_BUILD_OPTIONS)))
	CFLAGS+=	-Werror
endif

export CFLAGS CPPFLAGS LDFLAGS

%:
	dh $@ --parallel --dbg-package=libwebsockets2-dbg --with autoreconf

override_dh_auto_configure:
	dh_auto_configure -- --enable-openssl --enable-libcrypto

get-orig-source:
	. debian/get-orig-source.sh
